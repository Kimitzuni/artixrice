#!/bin/bash

##
## VARIABLES
##
Shortcuts_InputFile="$HOME/.local/share/shortcuts"
Qutebrowser_Output="$HOME/.config/qutebrowser/qute_keys.py"
Ranger_Output="$HOME/.config/ranger/keys.conf"
POSIX_Output="$HOME/.config/shells/dirsrc"

##
## FUNCTIONS
##
create-qutebrowser-keys() {
	Qutebrowser_Keys="$(awk '/^WWW/ {print "config.bind(!" $2 "!, !open", $3 "!)"}' $Shortcuts_InputFile | tr "!" "'")"
	Qutebrowser_KeysCSV="$(awk '/^WWW/ {print $2 "," $3}' $Shortcuts_InputFile)"

	cat << EOF > $Qutebrowser_Output
#!/usr/bin/env python3
#
# Autogenerated by 'shortcuts'
# ==================================================
# Edit $Shortcuts_InputFile instead of this.

$Qutebrowser_Keys
EOF

	
	printf ">>> Created shortcuts for \033[1;95mqutebrowser\033[0m\n"
	echo "$Qutebrowser_KeysCSV" > $HOME/.config/qutebrowser/keys.csv
}

create-posix-shortcuts() {
	POSIX_Shortcuts="$(awk '/^FSH/ {print "alias", $2, "=\"" $3 "\""}' $Shortcuts_InputFile)"
	echo "$POSIX_Shortcuts"
}

create-qutebrowser-keys
create-posix-shortcuts
